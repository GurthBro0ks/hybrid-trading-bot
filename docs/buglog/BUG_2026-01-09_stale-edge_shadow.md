# Stale-Edge Shadow Evidence

## Baseline
$ date -Iseconds && hostname && uname -a
2026-01-09T18:07:36+00:00
slimy-nuc1
Linux slimy-nuc1 6.8.0-90-generic #91-Ubuntu SMP PREEMPT_DYNAMIC Tue Nov 18 14:14:30 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux

$ git rev-parse --short HEAD
6b393c4

$ python3 --version
Python 3.12.3

## Shadow Run (normal)
$ STALE_EDGE_MODEL_HORIZON_SEC=5 STALE_EDGE_MODEL_WARMUP_SAMPLES=2 STALE_EDGE_MAX_ORDERS_PER_MIN=6 STALE_EDGE_SPREAD_MAX=0.1 python3 scripts/run_shadow_stale_edge.py --minutes 1 --loop-interval-sec 1 --book-bias -0.1

## End-Time Gating Proof
$ python3 scripts/run_shadow_stale_edge.py --minutes 1 --loop-interval-sec 1 --market-end-ts 1767982146

## Feed Failure Determinism
$ STALE_EDGE_FEED_STALE_ABORT_SEC=2 python3 scripts/run_shadow_stale_edge.py --minutes 1 --loop-interval-sec 1 --force-feed-failure

## Decision Samples
$ head -n 11 data/flight_recorder/stale_edge_decisions.csv
ts,market_id,now,market_end_ts,official_mid,official_age_ms,pm_yes_bid,pm_yes_ask,pm_no_bid,pm_no_ask,pm_book_age_ms,implied_yes,implied_no,fair_up_prob,edge_yes,edge_no,action,reason,params_hash
1767982079002,pm-demo-market,1767982079002,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982082212,pm-demo-market,1767982082212,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982085267,pm-demo-market,1767982085267,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982088280,pm-demo-market,1767982088280,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982091304,pm-demo-market,1767982091304,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982094319,pm-demo-market,1767982094319,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982097356,pm-demo-market,1767982097356,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982100374,pm-demo-market,1767982100374,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982103367,pm-demo-market,1767982103367,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
1767982106379,pm-demo-market,1767982106379,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,

## End-Time Anomaly Evidence
$ rg -n "END_TIME_ANOMALY" data/flight_recorder/stale_edge_decisions.csv | head -5
22:1767982156594,pm-demo-market,1767982156594,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,CANCEL_REPLACE,END_TIME_ANOMALY,
23:1767982159767,pm-demo-market,1767982159767,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,CANCEL_REPLACE,END_TIME_ANOMALY,
24:1767982162772,pm-demo-market,1767982162772,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,CANCEL_REPLACE,END_TIME_ANOMALY,
25:1767982165805,pm-demo-market,1767982165805,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,CANCEL_REPLACE,END_TIME_ANOMALY,
26:1767982168813,pm-demo-market,1767982168813,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,CANCEL_REPLACE,END_TIME_ANOMALY,

## Feed Failure Evidence
$ rg -n "OFFICIAL_FEED_MISSING|FEED_STALE_ABORT" data/flight_recorder/stale_edge_decisions.csv | head -5
2:1767982079002,pm-demo-market,1767982079002,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
3:1767982082212,pm-demo-market,1767982082212,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
4:1767982085267,pm-demo-market,1767982085267,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
5:1767982088280,pm-demo-market,1767982088280,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,
6:1767982091304,pm-demo-market,1767982091304,1767985679002,,,0.39,0.41000000000000003,0.59,0.61,0,,,,,,NO_TRADE,OFFICIAL_FEED_MISSING,

## Rate Limit Evidence
$ rg -c ",PLACE_ORDER," data/flight_recorder/stale_edge_decisions.csv

## Rate Limit Evidence (counts)
$ python3 - <<'PY'
place_orders=0 rate_limit_blocks=4

## Rate Limit Evidence (sample)
$ rg -n "CANCEL_RATE_LIMIT|RATE_LIMIT" data/flight_recorder/stale_edge_decisions.csv | head -5
28:1767982174875,pm-demo-market,1767982174875,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,NO_TRADE,CANCEL_RATE_LIMIT,
29:1767982177885,pm-demo-market,1767982177885,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,NO_TRADE,CANCEL_RATE_LIMIT,
30:1767982180892,pm-demo-market,1767982180892,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,NO_TRADE,CANCEL_RATE_LIMIT,
31:1767982183900,pm-demo-market,1767982183900,1767982146000,,,0.45999999999999996,0.48,0.52,0.54,0,,,,,,NO_TRADE,CANCEL_RATE_LIMIT,
